<div class="container">
  <div class="row">
    <div class="col-lg-12">
      <!-- breadcrumb-->
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="#">Accueil</a></li>
          <li class="breadcrumb-item"><a href="#">Patients</a></li>
        </ol>
      </nav>
    </div>
    <div *ngIf="showFormAddPatient" style="margin-bottom: 25px" class="col-12">
      <div class="card">
        <div class="card-body">

          <div class="card-head">
            <div>
              <mat-icon style="color: orange;">add</mat-icon>
              <span style="color: #1a69bc ; margin-left:10px">Ajouter Patient</span>
            </div>
          </div>
          <hr>

          <form #f="ngForm" (ngSubmit)="onSavePatient(f.value)">

            <div class="form-row">
              <div class="form-group col-md-6">
                <label>Nom *</label>
                <input type="text" class="form-control" placeholder="Nom" ngModel name="firstname" #firstname="ngModel" required>
                <div class="alert alert-danger"*ngIf="firstname.touched && !firstname.valid" >Nom is required </div>
              </div>
              <div class="form-group col-md-6">
                <label>Prénom *</label>
                <input type="text" class="form-control" placeholder="Prénom" ngModel name="lastname"
                       #lastname="ngModel" required>
                <div class="alert alert-danger"*ngIf="lastname.touched && !lastname.valid" >Nom is required </div>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group col-md-6">
                <label>Sexe *</label>
                <select class="custom-select mr-sm-2" id="inlineFormCustomSelect" ngModel name="sexe" #sexe="ngModel" required="">
                  <option selected>Choose...</option>
                  <option value="M">M</option>
                  <option value="F">F</option>
                </select>
                <div class="alert alert-danger"*ngIf="sexe.touched && !sexe.valid" >Sexe is required </div>
              </div>
              <div class="form-group col-md-6">
                <label>Téléphone *</label>
                <input type="text" class="form-control" placeholder="télephone" ngModel name="telephone"
                       #telephone="ngModel" required>
                <div class="alert alert-danger"*ngIf="telephone.touched && !telephone.valid" >telephone is required </div>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group col-md-6">
                <label>Date Naissance *</label>
                <input type="date" class="form-control" ngModel name="birthday" #birthday="ngModel" required>
                <div class="alert alert-danger"*ngIf="birthday.touched && !birthday.valid" >Date Naissance is required </div>
              </div>
              <div class="form-group col-md-6">
                <label>Date Validité CNAM</label>
                <input type="date" class="form-control" ngModel name="validationday" #validationday="ngModel">
              </div>
            </div>


            <div class="form-row">
              <div class="form-group col-md-6">
                <label>Type CNAM</label>
                <input type="text" class="form-control" ngModel name="typeCNAM" #typeCNAM="ngModel">
              </div>
              <div class="form-group col-md-6">
                <label>Numéro Matricule CNAM </label>
                <input type="text" class="form-control" placeholder="Numéro Matricule CNAM" ngModel name="numMatCNAM"
                       #numMAtCNAM="ngModel">
              </div>
            </div>

            <div class="form-row">

              <div class="form-group col-md-6">
                <label>Code APCI </label>
                <input type="text" class="form-control" placeholder="Code APCI" ngModel name="codeAPCI"
                       #codeAPCI="ngModel">
              </div>
            </div>

            <div class="text-center">
              <button type="submit" class="btn btn-sm btn-primary" style="margin-right: 5px" >Enregistrer</button>
              <button  class="btn btn-sm btn-danger" (click)="hideForm()">Annuler</button>
            </div>
          </form>

        </div>
      </div>
    </div>

    <div class="col-12">
      <div class="card">
        <div class="card-body">

          <div class="card-head">
            <div>
              <mat-icon style="color: orange;">create_new_folder</mat-icon>
              <span class="card-title"> Liste Dossiers </span>
            </div>
            <div>
              <button class="btn btn-sm btn-primary" (click)="showForm()">
                <mat-icon>add</mat-icon>
                Ajouter
              </button>
            </div>
          </div>
          <hr>

          <form>
            <table class="table table-striped table-bordered">
              <thead>
              <tr>
                <th>Numéro Dossier</th>
                <th>Nom</th>
                <th>Prénom</th>
                <th>Date Naissance</th>
                <th>Sexe</th>
                <th>Type CNAM</th>
                <th>Action</th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let patient of listPatients._embedded.patients">
                <td>{{patient.id}}</td>
                <td>{{patient.firstname}}</td>
                <td>{{patient.lastname}}</td>
                <td>{{patient.birthday}}</td>
                <td>{{patient.sexe}}</td>
                <td>{{patient.typeCNAM}}</td>
                <td>
                  <a class="text-warning" (click)="onOpenDossier(patient)">
                    <mat-icon>visibility</mat-icon>
                  </a>
                  <a class="text-success">
                    <mat-icon>edit</mat-icon>
                  </a>
                  <a class="text-danger" (click)="onDeletePatient(patient)">
                    <mat-icon>delete</mat-icon>
                  </a>
                </td>
              </tr>
              </tbody>
            </table>
          </form>

        </div>
      </div>
    </div>
  </div>
</div>

